"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}!function t(e,n,r){function o(i,l){if(!n[i]){if(!e[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return o(n||t)},c,c.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){var r=t("./utilities"),o=t("./components/modal"),a=t("./components/loader"),i=(document.getElementById("app"),document.getElementById("beer-list")),l="https://api.punkapi.com/v2/beers?page=",s=1,c="&per_page=12",d=l+s+c,u={base_url:"https://api.soundcloud.com/tracks",client_id:"l8b1LlbFBGgDJmPurEkqHuuUHDVckbWK",genre:function(t){return t<=1?"chillout":t>=1&&t<=3?"techno":t>=3&&t<=6?"deep":t>=6&&t<=12?"rock":"metal"},buildUrl:function(t){return u.base_url+"?client_id="+u.client_id+"&genres="+u.genre(t)},renderTracks:function(){var t=JSON.parse(this.responseText);4===this.readyState&&200===this.status?t.some(function(t,e){if(null!==t.artwork_url){var n=document.createElement("li");n.setAttribute("class","track");var r='\n\t\t\t\t\t\t<figure class="track-cover-wrapper">\n\t\t\t\t\t\t\t<img src="'+t.artwork_url+'" alt="'+t.title+'" class="track__cover" />\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t<div class="track-meta-wrapper">\n\t\t\t\t\t\t\t<div class="track__title">'+t.title+'</div>\n\t\t\t\t\t\t\t<a href="'+t.permalink_url+'" title="'+t.title+'" target="_blank" class="button button-soundcloud">Listen</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t';n.innerHTML=r,playlist.appendChild(n)}return 4===e}):console.log("Error with tracks loading")}},m={createXHR:function(){try{return new XMLHttpRequest}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return new ActiveXObject("Msxml2.XMLHTTP")}}},fetch:function(t,e,n){var r=m.createXHR();r.addEventListener("load",e,!1),r.addEventListener("error",n,!1),r.open("GET",t,!0),r.send()},requestError:function(t){console.log("Error, please try again later",t)},beerList:function(){var t=JSON.parse(this.responseText);a.show(".beer-loader"),4===this.readyState&&200===this.status?(t.forEach(function(t,e){var n='\n\t\t\t\t\t<img src="'+t.image_url+'" alt="'+t.name+'" class="beer-card__image" />\n\t\t\t\t\t<h3 class="beer-card__name h4">'+r.trimString(t.name,15)+'</h3>\n\t\t\t\t\t<p class="beer-card__tagline">'+r.trimString(t.tagline,25)+"</p>\n\t\t\t\t",o=document.createElement("li");o.setAttribute("class","card beer-card animated fadeInUp"),o.setAttribute("title",t.name),o.setAttribute("data-id",t.id),o.innerHTML=n,setTimeout(function(){a.hide(".beer-loader"),i.appendChild(o)},1e3),m.events.openSingleBeer(o)}),m.loadMoreBeers()):a.hide(".beer-loader")},singleBeer:{load:function(){var t="https://api.punkapi.com/v2/beers/"+this.getAttribute("data-id");o.load(),m.fetch(t,m.singleBeer.render,m.error)},render:function(){var t=JSON.parse(this.responseText);if(t=t[0],4===this.readyState&&200===this.status){var e='\n\t\t\t\t\t<div class="beer animated fadeInUp">\n\t\t\t\t\t\t<figure class="beer-image-wrapper">\n\t\t\t\t\t\t\t<img src="'+t.image_url+'" alt="'+t.name+'" class="beer__image" />\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t<div class="beer-content-wrapper">\n\t\t\t\t\t\t\t<header>\n\t\t\t\t\t\t\t\t<h2 class="beer__name">'+t.name+'</h2>\n\t\t\t\t\t\t\t\t<p class="beer__tagline">'+t.tagline+'</p>\n\t\t\t\t\t\t\t\t<div class="beer-meta">\n\t\t\t\t\t\t\t\t\t<span><b>IBU:</b> '+t.ibu+"</span>\n\t\t\t\t\t\t\t\t\t<span><b>ABV:</b> "+t.abv+"</span>\n\t\t\t\t\t\t\t\t\t<span><b>EBC:</b> "+t.ebc+'</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t<div class="beer__copy">\n\t\t\t\t\t\t\t\t<p>'+t.description+'</p>\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="beer-food">\n\t\t\t\t\t\t\t\t<h5>Best served with:</h5>\n\t\t\t\t\t\t\t\t<ul class="food-list">\n\t\t\t\t\t\t\t\t    '+t.food_pairing.map(function(t){return'<li class="food-list__item">'+t+"</li>"}).join("")+'\n\t\t\t\t\t\t\t\t</ul>\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="playlist-wrapper animated fadeInUp">\n\t\t\t\t\t\t<header class="playlist-header">\n\t\t\t\t\t\t\t<h5>Playlist</h5>\n\t\t\t\t\t\t</header>\n\t\t\t\t\t\t<ul id="playlist"></ul>\n\t\t\t\t\t</div>\n\t\t\t\t',n=(document.getElementById("playlist"),u.buildUrl(""+t.abv));m.fetch(n,u.renderTracks,m.error),o.pushContent(e)}else a.hide(".beer-loader")}},loadMoreBeers:function(){window.onscroll=function(){if(window.innerHeight+window.scrollY>=document.body.scrollHeight){s=++s;var t=l+s+c;m.fetch(t,m.beerList,m.error)}}},events:{openSingleBeer:function(t){t.addEventListener("click",m.singleBeer.load)}},init:function(){m.fetch(d,m.beerList,m.error)}};e.exports={init:m.init}},{"./components/loader":2,"./components/modal":3,"./utilities":6}],2:[function(t,e,n){var r={show:function(t){document.querySelector(t).style.display="block"},hide:function(t){document.querySelector(t).style.display="none"}};e.exports={show:r.show,hide:r.hide}},{}],3:[function(t,e,n){var r=document.querySelector(".modal"),o=document.querySelector(".modal-content"),a=document.querySelector(".close-modal"),i=t("./loader"),l={load:function(){document.body.style.overflow="hidden",r.classList.add("modal-loading"),i.show(".modal-loader")},isLoaded:function(){r.classList.remove("modal-loading"),i.hide(".modal-loader")},toggleModal:function(){r.classList.toggle("show-modal"),l.isLoaded()},hideModal:function(){r.classList.remove("modal-loading"),r.classList.remove("show-modal"),document.body.removeAttribute("style")},pushContent:function(t){void 0!==t?(o.innerHTML=t,setTimeout(function(){l.toggleModal()},300)):l.toggleModal()},windowOnClick:function(t){t.target===r&&l.hideModal()},events:function(){a.addEventListener("click",l.toggleModal),window.addEventListener("click",l.windowOnClick)},init:function(){l.events()}};e.exports={init:l.init,load:l.load,pushContent:l.pushContent}},{"./loader":2}],4:[function(t,e,n){var r=t("./app"),o=t("./tweenmax");r.init(),o.init(),t("./components/modal").init()},{"./app":1,"./components/modal":3,"./tweenmax":5}],5:[function(t,e,n){var r=new ScrollMagic.Controller({refreshInterval:0}),o=[].concat(_toConsumableArray(document.querySelectorAll(".fade-in-tm"))),a=[].concat(_toConsumableArray(document.querySelectorAll(".fade-out-tm"))),i=[].concat(_toConsumableArray(document.querySelectorAll(".slide"))),l=([].concat(_toConsumableArray(document.querySelectorAll(".slide-content"))),[].concat(_toConsumableArray(document.querySelectorAll(".change-bg-tm")))),s={mouseMove:function(t){var e=t.touches?t.touches[0].clientY:t.clientY,n=window.innerHeight/2,r=-(e-n)/(n/10);TweenMax.to(".slide__image",1,{y:r+"%",force3D:!0})},scrollMagic:{slideWipe:function(){for(var t=0;t<i.length;t++)new ScrollMagic.Scene({triggerElement:i[t],triggerHook:0,duration:"100%"}).setPin(i[t]).addTo(r)},changeBackground:function(t){for(var e=0;e<t.length;e++)new ScrollMagic.Scene({triggerElement:t[e],triggerHook:0,duration:"100%"}).setTween(TweenMax.to(t[e],1,{backgroundColor:"transparent",ease:Power0.easeNone})).addTo(r)},fadeIn:function(t){for(var e=0;e<t.length;e++)new ScrollMagic.Scene({triggerElement:t[e].parentNode.parentNode,triggerHook:0}).setTween(TweenMax.from(t[e],.3,{transform:"translateY(20px)",autoAlpha:0,ease:Power0.easeNone})).addTo(r)},fadeOut:function(t){for(var e=0;e<t.length;e++)new ScrollMagic.Scene({triggerElement:t[e].parentNode.parentNode,triggerHook:0,offset:251}).setTween(TweenMax.to(t[e],.3,{transform:"translateY(20px)",autoAlpha:0,ease:Power0.easeNone})).addTo(r)}},events:function(){i[0].addEventListener("mousemove",s.mouseMove),i[0].addEventListener("touchstart",s.mouseMove),i[0].addEventListener("touchmove",s.mouseMove)},init:function(){s.events(),s.scrollMagic.slideWipe(),s.scrollMagic.changeBackground(l),s.scrollMagic.fadeIn(o),s.scrollMagic.fadeOut(a)}};e.exports={init:s.init}},{}],6:[function(t,e,n){var r={trimString:function(t,e){if(t.length>e){var n=t.substr(0,e);return(n=n.substr(0,Math.min(n.length,n.lastIndexOf(" "))))+"..."}return t}};e.exports={trimString:r.trimString}},{}]},{},[4]);